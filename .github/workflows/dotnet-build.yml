name: .Net WebApp Build

on:
  push:
    branches:
      - github-actions-dotnet-webapp
  schedule:
    - cron: '0 * * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do c√≥digo
        uses: actions/checkout@v4
      
      - name: Verificar se est√° na branch github-actions-dotnet-webapp
        run: |
          echo "Branch atual: ${GITHUB_REF#refs/heads/}"
          if [ "${GITHUB_REF#refs/heads/}" != "github-actions-dotnet-webapp" ]; then
            echo "‚ùå Esta execu√ß√£o n√£o est√° na branch github-actions-dotnet-webapp. Encerrando."
            exit 1
          fi

      - name: Restaurar e Compilar aplica√ß√£o .Net
        run: |
          echo "üì¶ Restaurando depend√™ncias..."
          dotnet restore **/*.csproj

          echo "üõ†Ô∏è Compilando a aplica√ß√£o..."
          dotnet build **/*.csproj --no-restore

          echo "‚úÖ Build conclu√≠do com sucesso!"